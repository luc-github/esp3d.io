<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.126.3">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="Web handlers description and parameters">
    <meta name="author" content="Luc LEBOSSE">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Web Handlers :: ESP3D Ecosystem">
    <meta name="twitter:description" content="Web handlers description and parameters">
    <meta property="og:url" content="http://localhost:1313/esp3d-tft/v1.x/documentation/api/webhandlers/index.html">
    <meta property="og:site_name" content="ESP3D Ecosystem">
    <meta property="og:title" content="Web Handlers :: ESP3D Ecosystem">
    <meta property="og:description" content="Web handlers description and parameters">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="ESP3D-TFT">
    <meta itemprop="name" content="Web Handlers :: ESP3D Ecosystem">
    <meta itemprop="description" content="Web handlers description and parameters">
    <meta itemprop="wordCount" content="914">
    <title>Web Handlers :: ESP3D Ecosystem</title>
    <link href="http://localhost:1313/esp3d-tft/v1.x/documentation/api/webhandlers/index.html" rel="canonical" type="text/html" title="Web Handlers :: ESP3D Ecosystem">
    <link href="/esp3d-tft/v1.x/documentation/api/webhandlers/index.xml" rel="alternate" type="application/rss+xml" title="Web Handlers :: ESP3D Ecosystem">
    <link href="/images/favicon.ico?1722688342" rel="icon" type="image/x-icon" sizes="any">
    <link href="/css/fontawesome-all.min.css?1722688348" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1722688348" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1722688348" rel="stylesheet">
    <link href="/css/auto-complete.css?1722688348" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1722688348" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1722688348" rel="stylesheet">
    <link href="/css/fonts.css?1722688348" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1722688348" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1722688348" rel="stylesheet">
    <link href="/css/theme-blue.css?1722688348" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-learn.css?1722688348" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1722688348" rel="stylesheet">
    <link href="/css/print.css?1722688348" rel="stylesheet" media="print">
    <link href="/css/format-print.css?1722688348" rel="stylesheet">
    <script src="/js/variant.js?1722688348"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'blue' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support print" data-url="/esp3d-tft/v1.x/documentation/api/webhandlers/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/index.html"><span itemprop="name">ESP3D Ecosystem</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/esp3d-tft/index.html"><span itemprop="name">ESP3D-TFT</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/esp3d-tft/v1.x/index.html"><span itemprop="name">Version 1.X</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/esp3d-tft/v1.x/documentation/index.html"><span itemprop="name">Documentation</span></a><meta itemprop="position" content="4">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/esp3d-tft/v1.x/documentation/api/index.html"><span itemprop="name">API</span></a><meta itemprop="position" content="5">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Web Handlers</span><meta itemprop="position" content="6"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/esp3d-tft/v1.x/documentation/api/project-arch/index.html" title="Project architecture reference (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/esp3d-tft/v1.x/documentation/api/clients/index.html" title="Clients (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
<h1 id="web-handlers">Web Handlers</h1>
<h3 id="-get">/ (GET)</h3>
<p>root is the default handler where all files will be served, if no file is defined, it looks for index.html or index.html.gz (compressed)
if you call specific file, it will look for the filename and filename.gz (compressed)
if no file is defined and there is not index.html(.gz) it will display embedded page
another way to show the embedded page is /?forcefallback=yes</p>
<h3 id="sd-get">/sd/ (GET)</h3>
<p>it will serve any file from SD card if there is one, it is only a wrapper to read SD card, no upload</p>
<h3 id="files-getpost">/files (GET/POST)</h3>
<p>this handler handle all commands for FS, including upload on FS.<br>
possible options/arguments are:</p>
<ul>
<li><code>quiet=yes</code> can be used when you don&rsquo;t want list files but just upload them</li>
<li><code>path=...</code> define the path to the file</li>
<li><code>action=...</code> define the action to execute which can be:<br>
- delete<br>
delete the file defined by <code>filename=...</code> it will also use <code>path=...</code> to do full path<br>
- deletedir<br>
delete the directory defined by <code>filename=...</code> it will also use <code>path=...</code> to do full path <br>
- createdir
create the directory defined by <code>filename=...</code> it will also use <code>path=...</code> to do full path</li>
<li><code>createPath=yes</code> when doing upload and the path do not exists, it will create it, POST only</li>
<li><code>&lt;filename&gt;S=...</code> give the size of uploaded file with <!-- raw HTML omitted --> name, need to be set before file is set in upload, POST only</li>
</ul>
<p>the output is a json file:</p>
<pre><code>```json
{   
    &quot;files&quot;:[ //the files list  
        {  
            &quot;name&quot;:&quot;index.html.gz&quot;, //the name of the file
            &quot;size&quot;:&quot;83.46 KB&quot;, //the formated size of the file 
            &quot;time&quot;:&quot;2022-09-04 11:56:05&quot; //the time when the file was modified last time, this one is optional and depend on (FILESYSTEM_TIMESTAMP_FEATURE)
        },
        {
            &quot;name&quot;:&quot;subdir&quot;, //the name of the file / directory
            &quot;size&quot;:&quot;-1&quot;, //the size is -1 because it is a directory
            &quot;time&quot;:&quot;&quot; //no time for directories optional as depend on (FILESYSTEM_TIMESTAMP_FEATURE)
        }
    ],
    &quot;path&quot;:&quot;/&quot;, //current path
    &quot;occupation&quot;:&quot;52&quot;, //% of occupation
    &quot;status&quot;:&quot;subdir created&quot;, //status 
    &quot;total&quot;:&quot;192.00 KB&quot;, //Formated total space of Filesystem
    &quot;used&quot;:&quot;100.00 KB&quot; //Formated used space of Filesystem
}
```
</code></pre>
<h3 id="sdfiles-getpost-">/sdfiles (GET/POST) )</h3>
<p>this handler handle all commands for SD, including upload on SD (only shared and direct SD)
this handler handle all commands for FS, including upload on FS.<br>
possible options/arguments are:</p>
<ul>
<li><code>quiet=yes</code> can be used when you don&rsquo;t want list files but just upload them</li>
<li><code>path=...</code> define the path to the file</li>
<li><code>action=...</code> define the action to execute which can be:<br>
- list
Will refresh the stats of the files
- delete<br>
delete the file defined by <code>filename=...</code> it will also use <code>path=...</code> to do full path<br>
- deletedir<br>
delete the directory defined by <code>filename=...</code> it will also use <code>path=...</code> to do full path <br>
- createdir
create the directory defined by <code>filename=...</code> it will also use <code>path=...</code> to do full path</li>
<li><code>createPath=yes</code> when doing upload and the path do not exists, it will create it, POST only</li>
<li><code>&lt;filename&gt;S=...</code> give the size of uploaded file with <!-- raw HTML omitted --> name, need to be set before file is set in upload, POST only</li>
</ul>
<p>the output is a json file:</p>
<pre><code>```json
{
    &quot;files&quot;:[ //the files list
        {
            &quot;name&quot;:&quot;3Oc-pika2.gco&quot;,//the name of the file
            &quot;shortname&quot;:&quot;3Oc-pika2.gco&quot;, //the 8.3 shortname if available, if not the name of the file
            &quot;size&quot;:&quot;83.46 KB&quot;, //the formated size of the file 
            &quot;time&quot;:&quot;2022-09-04 11:56:05&quot; //the time when the file was modified last time, this one is optional and depend on (SD_TIMESTAMP_FEATURE)
        },
        {
            &quot;name&quot;:&quot;subdir&quot;, //the name of the file / directory
            &quot;size&quot;:&quot;-1&quot;, //the size is -1 because it is a directory
            &quot;time&quot;:&quot;&quot; //no time for directories optional as depend on (SD_TIMESTAMP_FEATURE)
        }
    ],
    &quot;path&quot;:&quot;/&quot;, //current path
    &quot;occupation&quot;:&quot;52&quot;, //% of occupation
    &quot;status&quot;:&quot;subdir created&quot;, //status 
    &quot;total&quot;:&quot;192.00 KB&quot;, //Formated total space of Filesystem
    &quot;used&quot;:&quot;100.00 KB&quot; //Formated used space of Filesystem
}
```
</code></pre>
<h3 id="upload-post">/upload (POST)</h3>
<p>this handler is for MKS boards using MKS communication protocol if enabled, it handle only upload on SD</p>
<h3 id="command-get">/command (GET)</h3>
<p>this handler is for all commands the parameter is <code>cmd=...</code>
if it is an <code>[ESPXXX]</code> command the answer is the <code>[ESPXXX]</code> response
if it is not an <code>[ESPXXX]</code> command the answer is <code>ESP3D says: command forwarded</code> and can be ignored</p>
<h3 id="login-getpost">/login (GET/POST)</h3>
<p>this handler is for authentication function if enabled
possible options/arguments are:<br>
- <code>DISCONNECT=YES</code>
it will clear current session, remove authentication cookie, set status to <code>disconnected</code> and response code to 401
- <code>SUBMIT=YES</code>
to login it will need also <code>PASSWORD=...</code> and <code>USER=...</code>, the answer will be 200 if success and 401 if failed
if user is already authenticated it can use <code>NEWPASSWORD=...</code> instead of <code>PASSWORD=...</code> to change his password, if successful answer will be returned with code 200, otherwise code will be 500 if change failed or if password format is invalid</p>
<p>Output:</p>
<ul>
<li>if authentified and no submission:<br>
<code>{&quot;status&quot;:&quot;Identified&quot;,&quot;authentication_lvl&quot;:&quot;admin&quot;}</code> and code 200</li>
<li>if not authenticated and no submission:<br>
<code>{&quot;status&quot;:&quot;Wrong authentication!&quot;,&quot;authentication_lvl&quot;:&quot;guest&quot;}</code> and code 401</li>
</ul>
<h3 id="config-get">/config (GET)</h3>
<p>this handler is a shortcut to [ESP420] command in text mode, to get output in json add <code>json=yes</code></p>
<h3 id="updatefw-getpost">/updatefw (GET/POST)</h3>
<p>this handler is for FW upload and update
Answer output is :
<code>{&quot;status&quot;:&quot;...&quot;}</code> if upload is successful the ESP will restart</p>
<h3 id="snap-get">/snap (GET)</h3>
<p>this handler is on esp32cam with camera enabled to capture a Frame
it answer by sending a jpg image</p>
<h3 id="descriptionxml-get">/description.xml (GET)</h3>
<p>this handler is for SSDP if enabled to present device informations</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;root</span> <span style="color:#960050;background-color:#1e0010">xmlns=</span><span style="color:#e6db74">&#34;urn:schemas-upnp-org:device-1-0&#34;</span><span style="color:#960050;background-color:#1e0010">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;specVersion&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;major&gt;</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&lt;/major&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;minor&gt;</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&lt;/minor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;/specVersion&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;URLBase&gt;http:</span><span style="color:#75715e">//192.168.2.178:80/&lt;/URLBase&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">&lt;device&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;deviceType&gt;urn:schemas-upnp-org:device:upnp:rootdevice:</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&lt;/deviceType&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;friendlyName&gt;esp</span><span style="color:#ae81ff">3</span><span style="color:#960050;background-color:#1e0010">d&lt;/friendlyName&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;presentationURL&gt;/&lt;/presentationURL&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;serialNumber&gt;</span><span style="color:#ae81ff">52332</span><span style="color:#960050;background-color:#1e0010">&lt;/serialNumber&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;modelName&gt;ESP</span> <span style="color:#960050;background-color:#1e0010">Board&lt;/modelName&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;modelDescription/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;modelNumber&gt;ESP</span><span style="color:#ae81ff">3</span><span style="color:#960050;background-color:#1e0010">D</span> <span style="color:#ae81ff">3.0</span><span style="color:#960050;background-color:#1e0010">&lt;/modelNumber&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;modelURL&gt;https:</span><span style="color:#75715e">//www.espressif.com/en/products/devkits&lt;/modelURL&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#960050;background-color:#1e0010">&lt;manufacturer&gt;Espressif</span> <span style="color:#960050;background-color:#1e0010">Systems&lt;/manufacturer&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;manufacturerURL&gt;https:</span><span style="color:#75715e">//www.espressif.com&lt;/manufacturerURL&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#960050;background-color:#1e0010">&lt;UDN&gt;uuid:</span><span style="color:#ae81ff">38323636-4558-4</span><span style="color:#960050;background-color:#1e0010">dda</span><span style="color:#ae81ff">-9188</span><span style="color:#960050;background-color:#1e0010">-cda</span><span style="color:#ae81ff">0e600</span><span style="color:#960050;background-color:#1e0010">cc</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">c&lt;/UDN&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;serviceList/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;iconList/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;/device&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;/root&gt;</span></span></span></code></pre></div><h3 id="captive-portal-bypass-handlers">Captive portal bypass handlers</h3>
<p>to avoid a redirect to index.html and so a refresh of the page, some classic handler have been added so they all go to / handler actually</p>
<ul>
<li>/generate_204</li>
<li>/gconnectivitycheck.gstatic.com</li>
<li>/fwlink/</li>
</ul>

            <footer class="footline">

<hr>
<center>If any error or need any addition,<br> please let me know by opening a ticket <a href="https://github.com/luc-github/esp3d.io/issues" target="_blank">here</a><br> or submit a fix by <a href="https://github.com/luc-github/esp3d.io/pulls" target="_blank">PR</a> or use the edit button on top menu</center>

            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="/js/clipboard.min.js?1722688348" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1722688348" defer></script>
    <script src="/js/theme.js?1722688348" defer></script>
  </body>
</html>
